---
import { roadmapApi } from '../api/roadmap';
import BaseLayout from '../layouts/BaseLayout.astro';
import { DiscoverRoadmaps } from '../components/DiscoverRoadmaps/DiscoverRoadmaps';

export const prerender = false;

const roadmapApiClient = roadmapApi(Astro);

const { error, response: roadmaps } =
  await roadmapApiClient.listShowcaseRoadmap();
console.log('-'.repeat(20));
console.log(error);
console.log('-'.repeat(20));

const searchParams = Astro.url.searchParams.toString();
---

<BaseLayout title='Discover Custom Roadmaps'>
  {
    roadmaps && (
      <DiscoverRoadmaps
        roadmapsResponse={roadmaps}
        searchParams={searchParams}
        client:load
      />
    )
  }
</BaseLayout>
